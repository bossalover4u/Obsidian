---
type: book
author:
  - Том Шарп
titles: Оскорбление нравственности
series:
cover: http://loveread.ec/img/photo_books/37078.jpg
start: 2020-08-05
end: 2020-08-11
status: done
---
![cover|150](Том%20Шарп%20-%20Оскорбление%20нравственности.jpg)

Автор:: [[Щоденник прочитаного/Автори/Том Шарп|Том Шарп]]
Название: Оскорбление нравственности
Серия:
Номер в серии:
Основные персонажи:

```dataviewjs
function daysBetween(startDate, endDate) {
	if (!startDate && !endDate) { 
		return "Укажите даты"; 
	} else if (startDate && !endDate) {
		return ("Читаю сейчас")
	}
	const oneDay = 24 * 60 * 60 * 1000; // hours * minutes * seconds * milliseconds
	const start = new Date(startDate);
	const end = new Date(endDate);
	const diffDays = Math.round(Math.abs((start - end) / oneDay));
	if (diffDays === 0) {
		return "Тот же день";   
	} else {
		let suffix;     
	    if (diffDays % 10 === 1 && diffDays % 100 !== 11) {
		    suffix = "день";     
	    } else if ([2, 3, 4].includes(diffDays % 10) && ![12, 13, 14].includes(diffDays % 100)) {
			suffix = "дня";     
		} else {       
			suffix = "дней";     
		}          
		return diffDays + " " + suffix;   
	} 
}  

const front = dv.current().file.frontmatter;
const start = front["start"]
const end = front["end"]
const data = [
  {start: start, end: end}
];

// Добавляем столбец "Продолжительность" с использованием функции daysBetween
const tableData = data.map(file => {
  const duration = daysBetween(start, end);
  return [start, end, duration];
});

dv.table(["Начал", "Закончил", "Продолжительность"], tableData);
```
***Інші книги автора***:
```dataviewjs
const currentFilename = dv.current().file.name;
const authors = dv.current().file.frontmatter['author'];

const folderpath = 'Щоденник прочитаного/Книги';

const books = app.vault.getFiles().filter(file =>
  file.path.includes(folderpath) &&
  file.basename !== currentFilename &&
  (Array.isArray(authors) ? authors.some(author => file.path.includes(author)) : file.path.includes(authors))
);

dv.list(books.map(file => dv.fileLink(file.path)));


```
***Інші книги серії:***
```dataviewjs
const front = dv.current().file.frontmatter;
if (front) {
	const series = front['series'];
	if (series) {
		const folderpath = 'Щоденник прочитаного/Книги';
		const currentFilename = dv.current().file.basename;
		const books = app.vault.getFiles().filter(file =>  
			file.path.includes(folderpath) && 
			dv.page(file.path)['series'] === series && 
			file.basename !== currentFilename &&
			file.path !== dv.current().file.path 
		);
		dv.list(books.map(file => dv.fileLink(file.path)));
	}
}

```

```dataviewjs
const front = dv.current().file.frontmatter;
if (front) {
	const series = front['series'];
	if (series) {
		const folderpath = 'Щоденник прочитаного/Книги';
		const currentFilename = dv.current().file.basename;
		const books = app.vault.getFiles().filter(file =>  
			file.path.includes(folderpath) && 
			dv.page(file.path)['series'] === series && 
			file.basename !== currentFilename &&
			file.path !== dv.current().file.path 
		);
		dv.list(books.map(file => dv.fileLink(file.path)));
	}
}

```

---
>[!info] Анотація
>Виной всему стали высокие устремления и жажда совершенства. Коммандант Ван Хеерден, начальник полиции Пьембурга, жаждал стать настоящим англичанином. Лейтенант Феркрамп жаждал стать начальником полиции Пьембурга. Констебль Элс жаждал... Стоп, об этом лучше промолчим. Что касается доктора фон Блименштайн, она просто хотела замуж, несмотря на дарованные ей природой габариты. Но судьбе было угодно, чтобы все эти высокие устремления привели к весьма серьезным последствиям - таким, что Пьембург содрогнулся от взрывов, лейтенант Феркрамп загремел в психушку, а половина полицейских вообще поменяли ориентацию.
>Том Шарп - один из самых ядовитых и беззастенчивых писателей в мире. Природный юмор довел его до того, что в 1970-х годах Шарпа, молодого университетского преподавателя, выслали из ЮАР - предварительно дав возможность ознакомиться с неповторимой атмосферой тамошних тюрем. Однако он и в Англии не угомонился.

___
- [[home|До бібліотеки]]

```dataviewjs
const currentFront = dv.current().file.frontmatter; // Получаем данные текущей заметки 
const status = currentFront['status']; // Получаем статус книги 
const year_start = currentFront['start'] ? parseInt(currentFront['start'].split('-')[0]) : null; // Получаем год, если есть дата начала 
const year_end = currentFront['end'] ? parseInt(currentFront['end'].split('-')[0]) : null; // Получаем год, если есть дата окончания 
const yearLinkTitle = year_end ? `Що я прочитав за ${year_end} рік` : "Немає дати закінчення читання"; 
if (year_start === null &&  year_end === null) {
	dv.paragraph("<span style='background-color: red; color: black;'>Не вказані дати</span>")
}else if (status === "processing") { 
	dv.paragraph("<span style='background-color: purple;'>Книга читається зараз</span>");
} else if (year_end !== null) { 
	const yearLink = dv.fileLink(`Щоденник прочитаного/Списки прочитаних книг по роках/${year_end}`, false, yearLinkTitle); 
	dv.list([yearLink]); 
} else { 
	dv.paragraph(`<span style='background-color: red;'>${yearLinkTitle}</span>`);
}
```